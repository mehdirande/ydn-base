<h1 class="classTitle">Class ydn.api.Storage</h1>

<p>
Extends <a href="ydn-db-storage.html">ydn.db.Storage</a>
</p>
<table cellspacing="0" class="summaryTable">



  <caption>
    Class Summary
  </caption>


  <thead>


  <tr>


    <th>Constructor Attributes</th>


    <th>Constructor Name and Description</th>
  </tr>
  </thead>


  <tbody>


  <tr>

    <td class="attributes">&nbsp;</td>




    <td class="nameDescription">



      <div class="fixedFont">
        <b><a href="#constructor">ydn.api.Storage</a></b>(name, schema, option)
      </div>


      <div class="description">
        Create a suitable storage mechanism.
      </div>
    </td>
  </tr>
  </tbody>
</table>


<table cellspacing="0" class="summaryTable">


<caption>
  Method Summary
</caption>



<thead>


<tr>


  <th>Method Attributes</th>



  <th>Method Name and Description</th>
</tr>
</thead>



<tbody>



<tr>



  <td class="attributes">&nbsp;</td>




  <td class="nameDescription">



    <div class="fixedFont">
      <b><a href="#getItem">getItem</a></b>(id)
    </div>




    <div class="description">
      Retrieve a string value from default key-value store.
    </div>
  </td>
</tr>


<tr>
  <td class="attributes">&nbsp;</td>
  <td class="nameDescription">
    <div class="fixedFont">
      <b><a href="#encrypt">encrypt</a></b>(passphase, opt_expiration)
    </div>

    <div class="description">
      Encrypt the database using a passphase.
    </div>
  </td>
</tr>

<tr>
  <td class="attributes">&nbsp;</td>

  <td class="nameDescription">

    <div class="fixedFont">
      <b><a href="#run">run</a></b>(transaction_callback, store_names,
      mode, completed_event_handler)
    </div>

    <div class="description">
      Create isolated database transaction.
    </div>
  </td>
</tr>

<tr>
  <td class="attributes">&nbsp;</td>
  <td class="nameDescription">
    <div class="fixedFont">
      <b><a href="#setItem">setItem</a></b>(key, value)
    </div>
    <div class="description">
      Store a value to default key-value store.
    </div>
  </td>
</tr>

</tbody>
</table>



<div class="details">
  <a name="constructor"></a>

  <div class="sectionTitle">
    Class Detail
  </div>

  <div class="fixedFont">
    <b>ydn.api.Storage</b>(opt_dbname, opt_schema, opt_options)
  </div>


  <dl class="detailList">
    <dt class="heading">See:</dt>

    <dd>Super class constructor: ydn.db.Core.</dd>
  </dl>
</div>




<a name="getItem"></a>


<div class="fixedFont">
  <span class="light">{!goog.async.Deferred}</span> <b>getItem</b>(id)
</div>


<div class="description">
  Retrieve a value from default key-value store. If the value is stored in encrypted, this will decrypted with set passphase.
</div>


<dl class="detailList">
  <dt class="heading">Parameters:</dt>

  <dt><span class="light fixedFont">{string}</span> <b>id</b></dt>

  <dd>The key of the object to get. It is the value of object in <code>keyPath</code> or autogenerated.</dd>
</dl>


<dl class="detailList">
  <dt class="heading">Returns:</dt>

  <dd><span class="light fixedFont">{!goog.async.Deferred}</span> return resulting object in deferred function. If not found, {@code undefined} is return.</dd>
</dl>

<hr>

<a name="encrypt"></a>


<div class="fixedFont">
  <b>encrypt</b>(passphase, opt_expiration)
</div>


<div class="description">
  Encrypt the database using a passphase. This is called before database is initialized, i.e, before <code>setName</code>
  to decrypt existing data. If this is called after the database initialized, passphase changing process occur.
  Value unable to encrypted will be discarded in the new database.
  <br />
  The passphase is generally generated from server side during the login process.
</div>


<dl class="detailList">
  <dt class="heading">Parameters:</dt>

  <dt><span class="light fixedFont">{string}</span> <b>passphase</b></dt>

  <dd>cryptographically strong phseudo random string.</dd>

  <dt><span class="light fixedFont">{number=}</span> <b>opt_expiration</b></dt>

  <dd>Expiration in milliseconds. If set, expired value are clear and return <code>undefined</code> upon retrieval.</dd>
</dl>


<hr>

<a name="setItem"></a>


<div class="fixedFont">
  <span class="light">{!goog.async.Deferred}</span> <b>setItem</b>(key, value)
</div>


<div class="description">
  Store a value to default key-value store. This will decrypt the value with the passphase provided.
</div>


<dl class="detailList">
  <dt class="heading">Parameters:</dt>

  <dt><span class="light fixedFont">{string}</span> <b>key</b></dt>

  <dd>The key to set.</dd>

  <dt><span class="light fixedFont">{string}</span> <b>value</b></dt>

  <dd>The value to save.</dd>
</dl>


<dl class="detailList">
  <dt class="heading">Returns:</dt>

  <dd><span class="light fixedFont">{!goog.async.Deferred}</span> true on success. undefined on fail.</dd>
</dl>

<hr>
